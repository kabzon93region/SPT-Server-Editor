# Справочник по торговцам Escape from Tarkov

## Общая структура

### Файл конфигурации: `configs/trader.json`
Основной файл с настройками всех торговцев.

### Папка торговцев: `database/traders/`
Каждый торговец имеет свою папку с ID в качестве имени.

## Структура файлов торговца

### 1. `base.json` - Основные настройки торговца

#### Базовые параметры:
- **`_id`** - Уникальный ID торговца
- **`availableInRaid`** - Доступен ли торговец в рейде (boolean)
- **`avatar`** - Путь к аватару торговца
- **`balance_dol`** - Баланс в долларах (int)
- **`balance_eur`** - Баланс в евро (int)
- **`balance_rub`** - Баланс в рублях (int)
- **`buyer_up`** - Может ли покупать предметы (boolean)
- **`currency`** - Основная валюта торговца ("RUB", "USD", "EUR")
- **`customization_seller`** - Продает ли кастомизацию (boolean)
- **`discount`** - Размер скидки в процентах (int, 0-100)
- **`discount_end`** - Время окончания скидки (timestamp)
- **`gridHeight`** - Высота сетки инвентаря торговца (int)

#### Страховка (`insurance`):
- **`availability`** - Доступна ли страховка (boolean)
- **`excluded_category`** - Исключенные категории предметов (array of IDs)
- **`max_return_hour`** - Максимальное время возврата в часах (int)
- **`max_storage_time`** - Максимальное время хранения в часах (int)
- **`min_payment`** - Минимальная плата за страховку (int)
- **`min_return_hour`** - Минимальное время возврата в часах (int)

#### Предметы для покупки (`items_buy`):
- **`category`** - Категории предметов, которые покупает торговец (array of IDs)
- **`id_list`** - Конкретные предметы, которые покупает торговец (array of IDs)

#### Запрещенные предметы (`items_buy_prohibited`):
- **`category`** - Категории предметов, которые НЕ покупает торговец (array of IDs)
- **`id_list`** - Конкретные предметы, которые НЕ покупает торговец (array of IDs)

#### Дополнительные параметры:
- **`isCanTransferItems`** - Может ли передавать предметы (boolean)
- **`loyaltyLevels`** - Уровни лояльности (object)
- **`medic`** - Медицинские услуги (object)
- **`repair`** - Ремонтные услуги (object)
- **`unlock`** - Условия разблокировки (object)

### 2. `assort.json` - Ассортимент торговца

#### Структура предмета в ассортименте:
- **`_id`** - Уникальный ID предмета в ассортименте
- **`_tpl`** - Шаблон предмета (ID из items.json)
- **`parentId`** - Родительский контейнер ("hideout", "main", etc.)
- **`slotId`** - Слот в контейнере ("hideout", "main", etc.)
- **`upd`** - Обновления предмета (object):
  - **`UnlimitedCount`** - Неограниченное количество (boolean)
  - **`StackObjectsCount`** - Количество в стопке (int)
  - **`BuyRestrictionMax`** - Максимальное количество для покупки (int)
  - **`BuyRestrictionCurrent`** - Текущее количество покупок (int)
  - **`OriginalStackObjectsCount`** - Оригинальное количество в стопке (int)

### 3. `questassort.json` - Квестовый ассортимент

#### Структура:
- **`started`** - Предметы доступные после начала квеста (object)
- **`success`** - Предметы доступные после успешного завершения квеста (object)
- **`fail`** - Предметы доступные после провала квеста (object)

### 4. `dialogue.json` - Диалоги торговца

#### Типы диалогов:
- **`insuranceStart`** - Диалоги при начале страховки (array of strings)
- **`insuranceFound`** - Диалоги при найденной страховке (array of strings)
- **`insuranceFailed`** - Диалоги при провале страховки (array of strings)
- **`insuranceFailedLabs`** - Диалоги при провале страховки в лаборатории (array of strings)
- **`insuranceExpired`** - Диалоги при истечении страховки (array of strings)
- **`insuranceComplete`** - Диалоги при завершении страховки (array of strings)

### 5. `services.json` - Услуги торговца

#### Типы услуг:
- **`BtrItemsDelivery`** - Доставка предметов через БТР
- **`PlayerTaxi`** - Такси для игрока
- **`BtrBotCover`** - Прикрытие БТР ботами
- **`TransitItemsDelivery`** - Доставка транзитных предметов

## Список торговцев

### Основные торговцы:
1. **Прапор** (`prapor`) - ID: `54cb50c76803fa8b248b4571`
   - Валюта: RUB
   - Специализация: Оружие, боеприпасы, базовое снаряжение

2. **Терапевт** (`therapist`) - ID: `54cb57776803fa99248b456e`
   - Валюта: RUB
   - Специализация: Медикаменты, лечение

3. **Забор** (`fence`) - ID: `579dc571d53a0658a154fbec`
   - Валюта: RUB
   - Специализация: Все предметы, быстрый обновление

4. **Лыжник** (`skier`) - ID: `58330581ace78e27b8b10cee`
   - Валюта: RUB
   - Специализация: Модификации оружия, снаряжение

5. **Миротворец** (`peacekeeper`) - ID: `5935c25fb3acc3127c3d8cd9`
   - Валюта: USD
   - Специализация: Западное оружие, снаряжение

6. **Механик** (`mechanic`) - ID: `5a7c2eca46aef81a7ca2145d`
   - Валюта: RUB
   - Специализация: Модификации оружия, инструменты

7. **Рэгмен** (`ragman`) - ID: `5ac3b934156ae10c4430e83c`
   - Валюта: RUB
   - Специализация: Одежда, броня, рюкзаки

8. **Егерь** (`jaeger`) - ID: `5c0647fdd443bc2504c2d371`
   - Валюта: RUB
   - Специализация: Выживание, снаряжение для леса

### Специальные торговцы:
9. **БТР** (`btr`) - ID: `656f0f98d80a697f855d34b1`
   - Валюта: RUB
   - Специализация: Транспортные услуги

10. **Реф** (`Ref`) - ID: `6617beeaa9cfa777ca915b7c`
    - Валюта: RUB
    - Специализация: Специальные предметы

11. **Барахолка** (`ragfair`) - ID: `ragfair`
    - Валюта: RUB
    - Специализация: Торговля между игроками

## Настройки времени обновления

### В `configs/trader.json`:
- **`updateTime`** - Время обновления для каждого торговца (array)
  - **`_name`** - Имя торговца
  - **`traderId`** - ID торговца
  - **`seconds`** - Время обновления в секундах
    - **`min`** - Минимальное время
    - **`max`** - Максимальное время
- **`updateTimeDefault`** - Время обновления по умолчанию (3600 сек = 1 час)
- **`tradersResetFromServerStart`** - Сброс торговцев при запуске сервера (boolean)
- **`purchasesAreFoundInRaid`** - Покупки считаются найденными в рейде (boolean)
- **`traderPriceMultipler`** - Множитель цен торговцев (float)

## Настройки Забора

### В `configs/trader.json`:
- **`fence`** - Специальные настройки для Забора
  - **`discountOptions`** - Опции скидок
    - **`assortSize`** - Размер ассортимента (int)
    - **`itemPriceMult`** - Множитель цены предметов (float)
    - **`presetPriceMult`** - Множитель цены пресетов (float)
    - **`weaponPresetMinMax`** - Минимальные и максимальные цены пресетов оружия (object)

## Уровни лояльности

### Структура `loyaltyLevels`:
- **`0`** - Уровень 0 (базовый)
- **`1`** - Уровень 1
- **`2`** - Уровень 2
- **`3`** - Уровень 3
- **`4`** - Уровень 4 (максимальный)

### Параметры уровня:
- **`minLevel`** - Минимальный уровень игрока (int)
- **`minSalesSum`** - Минимальная сумма продаж (int)
- **`minStanding`** - Минимальная репутация (float)
- **`minDangerLevel`** - Минимальный уровень опасности (int)

## Медицинские услуги

### Структура `medic`:
- **`availability`** - Доступность медицинских услуг (boolean)
- **`price`** - Цена за лечение (int)
- **`currency`** - Валюта для оплаты ("RUB", "USD", "EUR")
- **`excluded_areas`** - Исключенные зоны лечения (array of strings)

## Ремонтные услуги

### Структура `repair`:
- **`availability`** - Доступность ремонта (boolean)
- **`currency`** - Валюта для оплаты ("RUB", "USD", "EUR")
- **`quality`** - Качество ремонта (float, 0.0-1.0)
- **`excluded_weapon`** - Исключенное оружие (array of IDs)
- **`excluded_id`** - Исключенные предметы (array of IDs)

## Условия разблокировки

### Структура `unlock`:
- **`level`** - Требуемый уровень игрока (int)
- **`profileLevel`** - Требуемый уровень профиля (int)
- **`standing`** - Требуемая репутация (float)
- **`loyaltyLevel`** - Требуемый уровень лояльности (int)
- **`questCompleted`** - Требуемые завершенные квесты (array of IDs)
- **`itemFoundInRaid`** - Требуемые найденные в рейде предметы (array of IDs)
