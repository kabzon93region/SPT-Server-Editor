# Руководство по массовому изменению параметров предметов

## Обзор

Модуль массового изменения параметров позволяет изменять параметры множества предметов одновременно. Это особенно полезно для:
- Изменения веса предметов
- Обновления редкости предметов
- Изменения характеристик оружия
- Массового редактирования любых других параметров

## Доступ к функции

1. Запустите SPT Server Editor
2. Откройте "Менеджер предметов"
3. Нажмите кнопку "⚡ Массовое изменение параметров"

## Интерфейс

### Вкладка "Настройка"

#### Список ID предметов
- **Поле ввода**: Введите ID предметов, каждый с новой строки
- **Кнопка "Очистить"**: Очищает список ID
- **Кнопка "Загрузить из файла"**: Загружает список ID из текстового файла
- **Кнопка "Сохранить в файл"**: Сохраняет текущий список ID в файл
- **Кнопка "Проверить ID"**: Проверяет валидность всех ID в списке

#### Параметр для изменения
- **Выпадающий список**: Выберите параметр из списка доступных
- **Кнопка "Обновить"**: Обновляет список доступных параметров
- **Информация о параметре**: Показывает тип, количество использований и статус

#### Новое значение
- **Поле ввода**: Введите новое значение параметра
- **Кнопка "Предложения"**: Показывает возможные значения для выбранного параметра
- **Валидация**: Автоматически проверяет корректность введенного значения

### Вкладка "Предварительный просмотр"

Показывает:
- ID предмета
- Название предмета
- Текущее значение параметра
- Новое значение
- Статус изменения

### Вкладка "Лог операций"

- **Отображение лога**: Показывает все операции и их результаты
- **Кнопка "Очистить лог"**: Очищает текущий лог
- **Кнопка "Сохранить лог"**: Сохраняет лог в файл
- **Кнопка "Экспорт в файл"**: Экспортирует лог в файл

## Поддерживаемые параметры

### Основные параметры
- `_id` - ID предмета
- `_name` - Название предмета
- `_parent` - Родительский предмет
- `_type` - Тип предмета

### Параметры свойств (_props.*)
- `_props.Weight` - Вес предмета (float)
- `_props.RarityPvE` - Редкость (Common, Uncommon, Rare, Superrare, Legendary, Epic)
- `_props.Durability` - Прочность (int)
- `_props.MaxDurability` - Максимальная прочность (int)
- `_props.Height` - Высота в слотах (int)
- `_props.Width` - Ширина в слотах (int)
- `_props.Description` - Описание предмета (string)
- `_props.Name` - Название предмета (string)
- `_props.ShortName` - Короткое название (string)

### Параметры оружия
- `_props.weapClass` - Класс оружия
- `_props.weapFireType` - Тип огня
- `_props.Ergonomics` - Эргономика (float)
- `_props.RecoilForceBack` - Отдача назад (float)
- `_props.RecoilForceUp` - Отдача вверх (float)
- `_props.AimSensitivity` - Чувствительность прицеливания (float)

### Параметры боеприпасов
- `_props.Caliber` - Калибр (string)
- `_props.Damage` - Урон (int)
- `_props.ArmorDamage` - Урон по броне (int)
- `_props.PenetrationPower` - Пробивная способность (int)
- `_props.FragmentationChance` - Шанс фрагментации (float)

### Параметры брони
- `_props.ArmorClass` - Класс брони (int)
- `_props.ArmorMaterial` - Материал брони (string)
- `_props.ArmorZone` - Зона защиты (array)

### Параметры локализации (locale.*)
- `locale.Name` - Локализованное название
- `locale.ShortName` - Локализованное короткое название
- `locale.Description` - Локализованное описание

## Примеры использования

### Изменение веса предметов
1. Введите ID предметов в список
2. Выберите параметр `_props.Weight`
3. Введите новое значение (например, `0.5`)
4. Запустите изменение

### Изменение редкости предметов
1. Введите ID предметов в список
2. Выберите параметр `_props.RarityPvE`
3. Выберите новое значение из предложений (Common, Uncommon, Rare, Superrare, Legendary, Epic)
4. Запустите изменение

### Изменение прочности оружия
1. Введите ID оружия в список
2. Выберите параметр `_props.Durability`
3. Введите новое значение (например, `100`)
4. Запустите изменение

## Безопасность

### Резервные копии
- Автоматически создается резервная копия базы данных перед изменениями
- Имя файла включает дату и время: `items.json.backup_YYYYMMDD_HHMMSS.json`

### Валидация
- Проверка существования предметов
- Валидация типов данных
- Проверка корректности значений

### Логирование
- Все операции записываются в лог
- Показываются значения до и после изменения
- Записываются ошибки и предупреждения

## Ограничения

1. **Производительность**: Рекомендуется обрабатывать не более 1000 предметов за раз
2. **Типы данных**: Значения должны соответствовать ожидаемому типу параметра
3. **Существование**: Предметы должны существовать в базе данных
4. **Параметры**: Параметр должен существовать в структуре предмета

## Устранение неполадок

### Ошибка "Параметр не найден"
- Убедитесь, что параметр существует в базе данных
- Используйте кнопку "Обновить" для обновления списка параметров

### Ошибка "Неверный формат значения"
- Проверьте тип данных параметра
- Используйте кнопку "Предложения" для просмотра возможных значений

### Ошибка "Предмет не найден"
- Проверьте правильность ID предмета
- Используйте кнопку "Проверить ID" для валидации списка

### Медленная работа
- Уменьшите количество предметов в списке
- Закройте другие приложения для освобождения памяти

## Техническая информация

### Файлы
- `modules/item_parameters_analyzer.py` - Анализатор параметров
- `modules/bulk_parameters_dialog.py` - Диалог массового изменения
- `modules/items_database.py` - Работа с базой данных предметов

### Логи
- Логи операций отображаются в интерфейсе
- Можно сохранить лог в файл для анализа
- Формат: `[ВРЕМЯ] СООБЩЕНИЕ`

### Резервные копии
- Создаются в той же папке, что и основной файл
- Имя включает временную метку
- Рекомендуется периодически очищать старые копии
